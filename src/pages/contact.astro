---
import Layout from '@/layouts/Layout.astro';
import Container from '@/components/ui/Container.astro';
import Section from '@/components/ui/Section.astro';
import Card from '@/components/ui/Card.astro';
import Button from '@/components/ui/Button.astro';
import { siteData } from '@/data/site';
import { Mail, MapPin, Calendar, Phone, Clock, Send, AlertCircle } from 'lucide-astro';

const title = 'Contact';
const description = 'Contactez-moi pour discuter de vos projets en géographie du tourisme, études d\'impact environnemental ou création de supports de sensibilisation.';
---

<Layout title={title} description={description}>
  <div class="min-h-screen bg-gradient-to-br from-cream via-sand-50 to-sand-100">
    <!-- Navigation -->
    <nav class="fixed top-0 w-full bg-cream/90 backdrop-blur-sm z-50 border-b border-sand-200">
      <Container class="py-4">
        <div class="flex items-center justify-between">
          <a href="/" class="font-display font-bold text-xl text-primary hover:text-sand-600 transition-colors">
            Maëlle Langlais
          </a>
          <div class="hidden md:flex items-center space-x-8">
            <a href="/parcours" class="text-dark hover:text-primary transition-colors">Parcours</a>
            <a href="/projets" class="text-dark hover:text-primary transition-colors">Projets</a>
            <a href="/contact" class="text-primary font-medium">Contact</a>
          </div>
        </div>
      </Container>
    </nav>

    <Section class="pt-32 pb-20">
      <Container>
        <!-- Header -->
        <div class="text-center mb-16">
          <h1 class="font-display text-4xl md:text-5xl font-bold text-dark mb-6">
            Contactons-nous
          </h1>
          <p class="text-xl text-dark/80 max-w-3xl mx-auto leading-relaxed">
            Un projet en tête ? Une question sur mes services ? Je serais ravie d'échanger avec vous 
            pour voir comment je peux vous accompagner dans votre démarche de développement durable.
          </p>
        </div>

        <div class="grid lg:grid-cols-3 gap-12">
          <!-- Contact Info -->
          <div class="lg:col-span-1 space-y-6">
            <!-- Contact Cards -->
            <Card>
              <div class="flex items-start gap-4">
                <div class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center flex-shrink-0">
                  <Mail class="w-6 h-6 text-primary" />
                </div>
                <div>
                  <h3 class="font-display font-semibold text-dark mb-2">Email</h3>
                  <p class="text-dark/70 text-sm mb-3">
                    Pour toute demande de devis ou question sur mes services
                  </p>
                  <a 
                    href={`mailto:${siteData.email}`}
                    class="text-primary hover:text-sand-600 transition-colors font-medium"
                  >
                    {siteData.email}
                  </a>
                </div>
              </div>
            </Card>

            <Card>
              <div class="flex items-start gap-4">
                <div class="w-12 h-12 bg-atlantic/10 rounded-lg flex items-center justify-center flex-shrink-0">
                  <Phone class="w-6 h-6 text-atlantic" />
                </div>
                <div>
                  <h3 class="font-display font-semibold text-dark mb-2">Téléphone</h3>
                  <p class="text-dark/70 text-sm mb-3">
                    Pour une discussion directe sur votre projet
                  </p>
                  <a 
                    href={`tel:${siteData.phone}`}
                    class="text-atlantic hover:text-atlantic/80 transition-colors font-medium"
                  >
                    {siteData.phone}
                  </a>
                </div>
              </div>
            </Card>

            <Card>
              <div class="flex items-start gap-4">
                <div class="w-12 h-12 bg-salicornes/10 rounded-lg flex items-center justify-center flex-shrink-0">
                  <MapPin class="w-6 h-6 text-salicornes" />
                </div>
                <div>
                  <h3 class="font-display font-semibold text-dark mb-2">Localisation</h3>
                  <p class="text-dark/70 text-sm mb-3">
                    Interventions en Nouvelle-Aquitaine et déplacements possibles
                  </p>
                  <p class="text-salicornes font-medium">
                    {siteData.location}
                  </p>
                </div>
              </div>
            </Card>

            <Card>
              <div class="flex items-start gap-4">
                <div class="w-12 h-12 bg-sand-200 rounded-lg flex items-center justify-center flex-shrink-0">
                  <Calendar class="w-6 h-6 text-sand-700" />
                </div>
                <div>
                  <h3 class="font-display font-semibold text-dark mb-2">Rendez-vous</h3>
                  <p class="text-dark/70 text-sm mb-3">
                    Réservez directement un créneau pour un appel découverte
                  </p>
                  <Button href={siteData.calendly} variant="outline" size="sm" external>
                    <Calendar class="w-4 h-4" />
                    Réserver un créneau
                  </Button>
                </div>
              </div>
            </Card>

            <!-- Response Time -->
            <div class="bg-sand-100 p-6 rounded-2xl">
              <div class="flex items-center gap-3 mb-3">
                <Clock class="w-5 h-5 text-sand-700" />
                <h3 class="font-semibold text-dark">Temps de réponse</h3>
              </div>
              <p class="text-dark/70 text-sm">
                Je réponds généralement sous <strong>24h</strong> en semaine. 
                Pour les urgences, n'hésitez pas à m'appeler directement.
              </p>
            </div>
          </div>

          <!-- Contact Form -->
          <div class="lg:col-span-2">
            <Card class="h-fit">
              <h2 class="font-display text-2xl font-bold text-dark mb-6">
                Envoyez-moi un message
              </h2>
              
              <form id="contact-form" class="space-y-6">
                <div class="grid md:grid-cols-2 gap-6">
                  <div>
                    <label for="firstName" class="block text-sm font-medium text-dark mb-2">
                      Prénom *
                    </label>
                    <input
                      type="text"
                      id="firstName"
                      name="firstName"
                      required
                      class="w-full px-4 py-3 border border-sand-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors"
                      placeholder="Votre prénom"
                    />
                  </div>
                  
                  <div>
                    <label for="lastName" class="block text-sm font-medium text-dark mb-2">
                      Nom *
                    </label>
                    <input
                      type="text"
                      id="lastName"
                      name="lastName"
                      required
                      class="w-full px-4 py-3 border border-sand-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors"
                      placeholder="Votre nom"
                    />
                  </div>
                </div>

                <div class="grid md:grid-cols-2 gap-6">
                  <div>
                    <label for="email" class="block text-sm font-medium text-dark mb-2">
                      Email *
                    </label>
                    <input
                      type="email"
                      id="email"
                      name="email"
                      required
                      class="w-full px-4 py-3 border border-sand-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors"
                      placeholder="votre@email.com"
                    />
                  </div>
                  
                  <div>
                    <label for="phone" class="block text-sm font-medium text-dark mb-2">
                      Téléphone
                    </label>
                    <input
                      type="tel"
                      id="phone"
                      name="phone"
                      class="w-full px-4 py-3 border border-sand-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors"
                      placeholder="06 12 34 56 78"
                    />
                  </div>
                </div>

                <div>
                  <label for="organization" class="block text-sm font-medium text-dark mb-2">
                    Organisation
                  </label>
                  <input
                    type="text"
                    id="organization"
                    name="organization"
                    class="w-full px-4 py-3 border border-sand-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors"
                    placeholder="Nom de votre organisation, collectivité, entreprise..."
                  />
                </div>

                <div>
                  <label for="subject" class="block text-sm font-medium text-dark mb-2">
                    Sujet *
                  </label>
                  <select
                    id="subject"
                    name="subject"
                    required
                    class="w-full px-4 py-3 border border-sand-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors"
                  >
                    <option value="">Sélectionnez un sujet</option>
                    <option value="etude-impact">Étude d'impact territorial</option>
                    <option value="cartographie">Cartographie & SIG</option>
                    <option value="conseil-tourisme">Conseil en tourisme durable</option>
                    <option value="sensibilisation">Supports de sensibilisation</option>
                    <option value="formation">Formation & Ateliers</option>
                    <option value="diagnostic">Diagnostic environnemental</option>
                    <option value="autre">Autre demande</option>
                  </select>
                </div>

                <div>
                  <label for="budget" class="block text-sm font-medium text-dark mb-2">
                    Budget indicatif
                  </label>
                  <select
                    id="budget"
                    name="budget"
                    class="w-full px-4 py-3 border border-sand-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors"
                  >
                    <option value="">Non défini</option>
                    <option value="moins-1000">Moins de 1 000€</option>
                    <option value="1000-3000">1 000 - 3 000€</option>
                    <option value="3000-5000">3 000 - 5 000€</option>
                    <option value="5000-10000">5 000 - 10 000€</option>
                    <option value="plus-10000">Plus de 10 000€</option>
                  </select>
                </div>

                <div>
                  <label for="message" class="block text-sm font-medium text-dark mb-2">
                    Message *
                  </label>
                  <textarea
                    id="message"
                    name="message"
                    required
                    rows="6"
                    class="w-full px-4 py-3 border border-sand-200 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors resize-y"
                    placeholder="Décrivez votre projet, vos besoins, vos objectifs... Plus vous serez précis·e, mieux je pourrai vous aider !"
                  ></textarea>
                </div>

                <div class="flex items-start gap-3">
                  <input
                    type="checkbox"
                    id="privacy"
                    name="privacy"
                    required
                    class="mt-1 rounded border-sand-200 text-primary focus:ring-primary"
                  />
                  <label for="privacy" class="text-sm text-dark/80">
                    J'accepte que mes données soient utilisées pour répondre à ma demande. 
                    <a href="/mentions-legales" class="text-primary hover:text-sand-600 transition-colors">
                      En savoir plus
                    </a>
                  </label>
                </div>

                <!-- Form Messages -->
                <div id="form-success" class="hidden p-4 bg-salicornes/10 border border-salicornes/20 rounded-lg">
                  <div class="flex items-center gap-2 text-salicornes">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                    </svg>
                    <span class="font-medium">Message envoyé avec succès !</span>
                  </div>
                  <p class="text-salicornes/80 text-sm mt-1">
                    Je vous répondrai dans les plus brefs délais.
                  </p>
                </div>

                <div id="form-error" class="hidden p-4 bg-red-50 border border-red-200 rounded-lg">
                  <div class="flex items-center gap-2 text-red-600">
                    <AlertCircle class="w-5 h-5" />
                    <span class="font-medium">Erreur lors de l'envoi</span>
                  </div>
                  <p class="text-red-600/80 text-sm mt-1">
                    Veuillez réessayer ou me contacter directement par email.
                  </p>
                </div>

                <Button variant="primary" size="lg" class="w-full">
                  <Send class="w-5 h-5" />
                  Envoyer le message
                </Button>
              </form>
            </Card>
          </div>
        </div>

        <!-- FAQ Section -->
        <div class="mt-20">
          <h2 class="font-display text-3xl font-bold text-dark mb-12 text-center">
            Questions fréquentes
          </h2>
          
          <div class="grid md:grid-cols-2 gap-8">
            <div class="space-y-6">
              <div class="bg-white p-6 rounded-2xl shadow-sm">
                <h3 class="font-display font-semibold text-dark mb-2">
                  Dans quelles régions intervenez-vous ?
                </h3>
                <p class="text-dark/70 text-sm">
                  Principalement en Nouvelle-Aquitaine, mais je me déplace dans toute la France 
                  selon la nature et l'ampleur du projet. Les consultations à distance sont également possibles.
                </p>
              </div>

              <div class="bg-white p-6 rounded-2xl shadow-sm">
                <h3 class="font-display font-semibold text-dark mb-2">
                  Quels sont vos délais d'intervention ?
                </h3>
                <p class="text-dark/70 text-sm">
                  Cela dépend de la complexité du projet et de ma charge de travail actuelle. 
                  Comptez généralement entre 2 et 8 semaines selon le service demandé.
                </p>
              </div>
            </div>

            <div class="space-y-6">
              <div class="bg-white p-6 rounded-2xl shadow-sm">
                <h3 class="font-display font-semibold text-dark mb-2">
                  Proposez-vous des devis gratuits ?
                </h3>
                <p class="text-dark/70 text-sm">
                  Oui, après un premier échange pour comprendre vos besoins, 
                  je vous propose un devis détaillé gratuit et sans engagement.
                </p>
              </div>

              <div class="bg-white p-6 rounded-2xl shadow-sm">
                <h3 class="font-display font-semibold text-dark mb-2">
                  Travaillez-vous avec les particuliers ?
                </h3>
                <p class="text-dark/70 text-sm">
                  Je travaille principalement avec les collectivités, associations et entreprises. 
                  Pour les particuliers, cela dépend du projet : n'hésitez pas à me contacter.
                </p>
              </div>
            </div>
          </div>
        </div>
      </Container>
    </Section>

    <!-- Footer -->
    <footer class="bg-dark text-white py-12">
      <Container>
        <div class="text-center">
          <h3 class="font-display font-bold text-xl text-primary mb-4">Vous préférez les réseaux sociaux ?</h3>
          <p class="text-white/70 mb-6">Retrouvez-moi également sur mes réseaux pour suivre mes actualités.</p>
          <div class="flex justify-center gap-6">
            <a href={siteData.social.linkedin} target="_blank" rel="noopener noreferrer" class="text-white/70 hover:text-white transition-colors">
              LinkedIn
            </a>
            <a href={siteData.social.twitter} target="_blank" rel="noopener noreferrer" class="text-white/70 hover:text-white transition-colors">
              Twitter
            </a>
            <a href={siteData.social.instagram} target="_blank" rel="noopener noreferrer" class="text-white/70 hover:text-white transition-colors">
              Instagram
            </a>
          </div>
        </div>
      </Container>
    </footer>
  </div>

  <script define:vars={{ siteData }}>
    // Contact form handling
    document.getElementById('contact-form')?.addEventListener('submit', function(e) {
      e.preventDefault();
      
      const formData = new FormData(this);
      const data = Object.fromEntries(formData);
      
      // Simulate form submission (replace with actual endpoint)
      const successMessage = document.getElementById('form-success');
      const errorMessage = document.getElementById('form-error');
      
      // Hide previous messages
      successMessage?.classList.add('hidden');
      errorMessage?.classList.add('hidden');
      
      // Create mailto link with form data
      const subject = encodeURIComponent(`Contact Portfolio - ${data.subject || 'Nouvelle demande'}`);
      const body = encodeURIComponent(`
Prénom: ${data.firstName}
Nom: ${data.lastName}
Email: ${data.email}
Téléphone: ${data.phone || 'Non renseigné'}
Organisation: ${data.organization || 'Non renseignée'}
Sujet: ${data.subject || 'Non spécifié'}
Budget: ${data.budget || 'Non défini'}

Message:
${data.message}
      `);
      
      const mailtoLink = `mailto:${siteData.email}?subject=${subject}&body=${body}`;
      
      // Open mail client
      window.location.href = mailtoLink;
      
      // Show success message
      successMessage?.classList.remove('hidden');
      
      // Reset form
      this.reset();
    });
  </script>
</Layout>
